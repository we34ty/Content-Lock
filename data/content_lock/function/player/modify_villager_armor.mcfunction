execute at @s run playsound entity.villager.no neutral @s ~ ~ ~ 1 1
execute at @s at @e[type=minecraft:villager,tag=content_lock.leveler,limit=1,sort=nearest] run particle happy_villager ~ ~ ~ 1 2 1 1 40 normal

execute at @s run data modify entity @e[type=minecraft:villager,tag=content_lock.leveler,limit=1,sort=nearest] Offers.Recipes[0].buy set from entity @s SelectedItem
execute at @s run data modify entity @e[type=minecraft:villager,tag=content_lock.leveler,limit=1,sort=nearest] Offers.Recipes[0].sell set from entity @s SelectedItem
execute store result score @s content_lock.temp1 run data get entity @s SelectedItem.components."minecraft:enchantments".levels."content_lock:armor_level"
scoreboard players set @s content_lock.temp2 1
scoreboard players operation @s content_lock.temp1 += @s content_lock.temp2
execute at @s run scoreboard players operation @e[type=minecraft:villager,tag=content_lock.leveler,limit=1,sort=nearest] content_lock.temp1 = @s content_lock.temp1
execute at @s as @e[type=minecraft:villager,tag=content_lock.leveler,limit=1,sort=nearest] store result entity @s Offers.Recipes[0].sell.components."minecraft:enchantments".levels."content_lock:armor_level" int 1 run scoreboard players get @s content_lock.temp1

execute if score @s content_lock.temp1 matches 1 at @s run data modify entity @e[type=minecraft:villager,tag=content_lock.leveler,limit=1,sort=nearest] Offers.Recipes[0].buyB set value {id:"minecraft:brick",count:1,components:{custom_data:{"item_upgrader":1}}}
execute if score @s content_lock.temp1 matches 2 at @s run data modify entity @e[type=minecraft:villager,tag=content_lock.leveler,limit=1,sort=nearest] Offers.Recipes[0].buyB set value {id:"minecraft:brick",count:2,components:{custom_data:{"item_upgrader":1}}}
execute if score @s content_lock.temp1 matches 3 at @s run data modify entity @e[type=minecraft:villager,tag=content_lock.leveler,limit=1,sort=nearest] Offers.Recipes[0].buyB set value {id:"minecraft:brick",count:4,components:{custom_data:{"item_upgrader":1}}}
execute if score @s content_lock.temp1 matches 4 at @s run data modify entity @e[type=minecraft:villager,tag=content_lock.leveler,limit=1,sort=nearest] Offers.Recipes[0].buyB set value {id:"minecraft:brick",count:1,components:{custom_data:{"item_upgrader":2}}}
execute if score @s content_lock.temp1 matches 5 at @s run data modify entity @e[type=minecraft:villager,tag=content_lock.leveler,limit=1,sort=nearest] Offers.Recipes[0].buyB set value {id:"minecraft:brick",count:2,components:{custom_data:{"item_upgrader":2}}}
execute if score @s content_lock.temp1 matches 6 at @s run data modify entity @e[type=minecraft:villager,tag=content_lock.leveler,limit=1,sort=nearest] Offers.Recipes[0].buyB set value {id:"minecraft:brick",count:4,components:{custom_data:{"item_upgrader":2}}}
execute if score @s content_lock.temp1 matches 7 at @s run data modify entity @e[type=minecraft:villager,tag=content_lock.leveler,limit=1,sort=nearest] Offers.Recipes[0].buyB set value {id:"minecraft:brick",count:1,components:{custom_data:{"item_upgrader":3}}}
execute if score @s content_lock.temp1 matches 8 at @s run data modify entity @e[type=minecraft:villager,tag=content_lock.leveler,limit=1,sort=nearest] Offers.Recipes[0].buyB set value {id:"minecraft:brick",count:2,components:{custom_data:{"item_upgrader":3}}}
execute if score @s content_lock.temp1 matches 9 at @s run data modify entity @e[type=minecraft:villager,tag=content_lock.leveler,limit=1,sort=nearest] Offers.Recipes[0].buyB set value {id:"minecraft:brick",count:4,components:{custom_data:{"item_upgrader":3}}}
execute if score @s content_lock.temp1 matches 10 at @s run data modify entity @e[type=minecraft:villager,tag=content_lock.leveler,limit=1,sort=nearest] Offers.Recipes[0].buyB set value {id:"minecraft:brick",count:1,components:{custom_data:{"item_upgrader":4}}}
execute if score @s content_lock.temp1 matches 11.. at @s run data modify entity @e[type=minecraft:villager,tag=content_lock.leveler,limit=1,sort=nearest] Offers.Recipes[0].buyB set value {id:"minecraft:barrier",count:1,components:{custom_data:{"item_upgrader":14}}}
execute if score @s content_lock.temp1 matches 11.. at @s run data modify entity @e[type=minecraft:villager,tag=content_lock.leveler,limit=1,sort=nearest] Offers.Recipes[0].sell set value {id:"minecraft:barrier",count:1,components:{custom_data:{"item_upgrader":14}}}
#give @p villager_spawn_egg[custom_name='[{"text":"Levelsmith","italic":false,"color":"aqua"}]',lore=['[{"text":"Spawns a villager which helps you","italic":false}]','[{"text":"evel up your weapons and armor","italic":false}]'],entity_data={id:villager,VillagerData:{type:desert,profession:weaponsmith,level:5},Offers:{Recipes:[{maxUses:999,rewardExp:0b,buy:{id:rotten_flesh,count:1},buyB:{id:rotten_flesh,count:1},sell:{id:rotten_flesh,count:1}}]},PersistenceRequired:1b,Tags:[content_lock.leveler],active_effects:[{id:regeneration,duration:-1,amplifier:0,ambient:1b,show_particles:0b}]}] 1